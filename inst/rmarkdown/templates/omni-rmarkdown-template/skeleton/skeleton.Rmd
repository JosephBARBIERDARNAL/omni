---
title: "Document Title"
subtitle: "Document Subtitle" 
report_authors: "Authors"
client_name: "Client Name"
client_organization: "Client Organization"
client_city: "Client City"
client_state: "Client State"
report_month: "Report Month"
report_year: "Report Year"
project_team: "Project Team"
project_code: "Project Code"
acknowledgements: "Names of People to Thank"
photo_background: TRUE
knit: pagedown::chrome_print
output:
  pagedown::html_paged:
    toc: TRUE
    self_contained: TRUE
    number_sections: FALSE
    css: ["omni-fonts.css", "omni-page.css", "default.css"]
toc-title: "Table of Contents"
lot: FALSE
lof: TRUE
abstract: >-
  <img class = "omni_logo_abstract" src = "omni-logo-horizontal.svg">
  <img class = "orange_rect_abstract" src = "orange-rectangle.svg">
  <br> 
  <h1 class = "title">`r rmarkdown::metadata$title` </h1>
  <h1 class = "subtitle"> `r rmarkdown::metadata$subtitle` </h1>
  <br> 
  Submitted to: 
  <br> 
  <br>
  `r rmarkdown::metadata$client_name`
  <br>
  `r rmarkdown::metadata$client_organization`
  <br>
  `r rmarkdown::metadata$report_month` `r rmarkdown::metadata$report_year`
  <br> 
  <br>
  <br>
  Author(s): `r rmarkdown::metadata$report_authors`
  <br>
  Project Team: `r rmarkdown::metadata$project_team`
  <br>
  <br>
  <br>
  For More Information:
  <br>
  <br>
  Project Code: `r rmarkdown::metadata$project_code`
  <br>
  projects@omni.org
  <br>
  <br>
  <br>
  Acknowledgements:
  <br>
  <br>
  The OMNI Institute wants to thank `r rmarkdown::metadata$acknowledgements` for their contributions to the creation of this report.
  <br>
  <br>
  <br>
  Suggested Citation:
  <br>
  <br>
  The OMNI Institute (`r rmarkdown::metadata$report_year`). `r rmarkdown::metadata$title`. Submitted to `r rmarkdown::metadata$client_organization`, `r rmarkdown::metadata$client_city`, `r rmarkdown::metadata$client_state`
---

```{js, echo=FALSE}
Paged.registerHandlers(class extends Paged.Handler {
  constructor(chunker, polisher, caller) {
    super(chunker, polisher, caller);    this.prefixes = [];
  }  retrieveUniquePrefixes(content) {
    const els = content.querySelectorAll('.figure > img[data-prefix] + p.caption, .figure > p.caption + img[data-prefix]');
    // retrieve all prefixes
    let prefixes = Array.from(els)
                        .map(el => el.parentNode.querySelector('img').dataset.prefix);
    // get unique prefixes
    this.prefixes = [...new Set(prefixes)];
  }  beforeParsed(content) {
    this.retrieveUniquePrefixes(content);
    for (const prefix of this.prefixes) {
      const els = content.querySelectorAll('.figure > img[data-prefix="' + prefix + '"] + p.caption, .figure > p.caption + img[data-prefix="' + prefix + '"]');      for (let i = 0; i < els.length; i++) {
        const newLabel = prefix + ' ' + (i + 1);
        const caption = els[i].parentNode.querySelector('p.caption');
        caption.textContent = caption.textContent.replace(/[^:]*/, newLabel);
        const figure = caption.parentNode; 
        const id = figure.firstElementChild.id;
        const lofEntry = content.querySelector('#LOF a[href*="' + id +'"]');
        lofEntry.childNodes[0].textContent = lofEntry.childNodes[0].textContent
                                                                   .replace(/\d*.\d*/, newLabel + ':');      }
    }
  }
});
```

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE,
                      fig.topcaption = TRUE)
library(tidyverse)
library(devtools)
library(flextable)
library(knitr)
load_all()
```

<div class="exec-summary">

# Executive Summary {-}

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus lacinia felis eget nisl tincidunt rutrum. Aliquam vitae lacinia ante, in pulvinar tortor. Maecenas porta, purus id condimentum euismod, leo urna eleifend nibh, scelerisque blandit lacus nulla nec leo. Vivamus lacus arcu, ultricies ac faucibus et, egestas eget velit. Morbi et accumsan ex. Nulla pellentesque molestie risus, quis interdum erat commodo sit amet. In convallis egestas velit, sit amet condimentum leo aliquet nec. Nunc ultricies ex sit amet pulvinar pellentesque. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Etiam odio nibh, efficitur vel nunc eu, posuere semper velit. Maecenas ac imperdiet elit, in placerat lacus. Suspendisse consectetur ligula et dolor porta, quis tempus risus elementum. Suspendisse sit amet metus ultricies, porttitor sem a, ultrices turpis

## Executive Summary Sub-Headline {-}

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus lacinia felis eget nisl tincidunt rutrum. Aliquam vitae lacinia ante, in pulvinar tortor. Maecenas porta, purus id condimentum euismod, leo urna eleifend nibh, scelerisque blandit lacus nulla nec leo. Vivamus lacus arcu, ultricies ac faucibus et, egestas eget velit. Morbi et accumsan ex. Nulla pellentesque molestie risus, quis interdum erat commodo sit amet. In convallis egestas velit, sit amet condimentum leo aliquet nec. Nunc ultricies ex sit amet pulvinar pellentesque. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Etiam odio nibh, efficitur vel nunc eu, posuere semper velit. Maecenas ac imperdiet elit, in placerat lacus. Suspendisse consectetur ligula et dolor porta, quis tempus risus elementum. Suspendisse sit amet metus ultricies, porttitor sem a, ultrices turpis

</div>

# First Level Header

Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Purus faucibus ornare suspendisse sed nisi lacus sed viverra tellus. Et ligula ullamcorper malesuada proin libero nunc consequat. Proin libero nunc consequat interdum varius sit. Maecenas pharetra convallis posuere morbi leo. Ipsum dolor sit amet consectetur. Dolor sit amet consectetur adipiscing elit duis tristique. Sit amet cursus sit amet dictum sit. Non sodales neque sodales ut etiam sit amet. Fermentum odio eu feugiat pretium nibh ipsum. Neque aliquam vestibulum morbi blandit cursus risus at ultrices mi. Maecenas pharetra convallis posuere morbi. Bibendum ut tristique et egestas quis ipsum suspendisse.

## Second Level Header

<aside>

> Fermentum odio eu feugiat pretium nibh ipsum. Neque aliquam vestibulum morbi blandit cursus risus at ultrices mi. Maecenas pharetra convallis posuere morbi. Bibendum ut tristique et egestas quis ipsum suspendisse.

<p class="quote-author">-- George Washington</p>

</aside>

Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Purus faucibus ornare suspendisse sed nisi lacus sed viverra tellus. Et ligula ullamcorper malesuada proin libero nunc consequat. Proin libero nunc consequat interdum varius sit. Maecenas pharetra convallis posuere morbi leo. Ipsum dolor sit amet consectetur. Dolor sit amet consectetur adipiscing elit duis tristique. Sit amet cursus sit amet dictum sit. Non sodales neque sodales ut etiam sit amet. Fermentum odio eu feugiat pretium nibh ipsum. Neque aliquam vestibulum morbi blandit cursus risus at ultrices mi. Maecenas pharetra convallis posuere morbi. Bibendum ut tristique et egestas quis ipsum suspendisse.


### Third Level Header

Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Purus faucibus ornare suspendisse sed nisi lacus sed viverra tellus. Et ligula ullamcorper malesuada proin libero nunc consequat. Proin libero nunc consequat interdum varius sit. Maecenas pharetra convallis posuere morbi leo. Ipsum dolor sit amet consectetur. Dolor sit amet consectetur adipiscing elit duis tristique. Sit amet cursus sit amet dictum sit. Non sodales neque sodales ut etiam sit amet. Fermentum odio eu feugiat pretium nibh ipsum. Neque aliquam vestibulum morbi blandit cursus risus at ultrices mi. Maecenas pharetra convallis posuere morbi. Bibendum ut tristique et egestas quis ipsum suspendisse.

```{r fig.height=3, fig.cap = "A very nice iris plot", out.extra='data-prefix="Chart"'}
iris %>%
  group_by(Species) %>%
  summarise(sepal_length_mean = mean(Sepal.Length)) %>%
  ggplot(aes(x = Species, y = sepal_length_mean, fill = Species)) +
  geom_bar(stat = "identity") +
  coord_flip() +
  scale_fill_omni_discrete() +
  theme_omni()
```

Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Purus faucibus ornare suspendisse sed nisi lacus sed viverra tellus. Et ligula ullamcorper malesuada proin libero nunc consequat. Proin libero nunc consequat interdum varius sit.

```{r, fig.cap = "A random figure", out.width="200px", fig.align='center', out.extra='data-prefix="Figure"'}
knitr::include_graphics("example_figure.png")
```

#### Fourth Level Header

Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Purus faucibus ornare suspendisse sed nisi lacus sed viverra tellus. Et ligula ullamcorper malesuada proin libero nunc consequat. Proin libero nunc consequat interdum varius sit. Maecenas pharetra convallis posuere morbi leo. Ipsum dolor sit amet consectetur. Dolor sit amet consectetur adipiscing elit duis tristique. Sit amet cursus sit amet dictum sit. Non sodales neque sodales ut etiam sit amet. Fermentum odio eu feugiat pretium nibh ipsum. Neque aliquam vestibulum morbi blandit cursus risus at ultrices mi. Maecenas pharetra convallis posuere morbi. Bibendum ut tristique et egestas quis ipsum suspendisse.

```{r fig.cap="Table as image", out.extra='data-prefix="Table"'}
mtcars %>% 
  slice(1:5) %>% 
  omni_table() 
```


# Another first level header

## With second level 1

### And third level A

## And second level 2 with a very very very very long title

### And third level A

### And third level C

## And second level 3



